<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Reading | Wenchang Yang's Homepage 杨文昌</title>
  <script src="./js/functions.js"></script>
  <script>write_head(1)</script>
</head>
<body data-spy="scroll" data-target="#myScrollspy" data-offset="20">
<script>write_navbar(1,'reading')</script>

<div class="container-fluid text-center color-title bg-color-title border-bottom">
  <h3 id="top">
    Most Recent Publicaions on the Atmosphere, Ocean and Climate <br>
    <small>by Topics</small><br>
    <small>
      Last updated: <script>write_update_time()</script>
    </small>
  </h3>
  <a href="./journals.html" class="btn btn-default">Journals <span class="glyphicon glyphicon-menu-right"></span></a>
  <p></p>
</div>

<!-- topics -->
<div class="container text-left">
  <p></p>
  <div class="row">
    <div class="col-md-1"></div>
    <div class="col-md-10">
      <ul id="topic_list" class="nav nav-pills nav-stacked text-left"></ul>
    </div>
    <div class="col-md-1"></div>
  </div>
</div>  <!-- container-->

<script>write_footer(1)</script>
<script>
$(document).ready(function(){
  // initialize the topic list
  $("#topic_list").html(get_html_topic_list());
  
  // toggle nav item background color
  $(".topic_name").css("background-color","#F4F4F4");
  $(".topic_name").hover(function(){
    $(this).css("background-color", "white");
    }, function(){
    $(this).css("background-color", "#F4F4F4");
  });
  
  // toggle the topic content
  $('.topic_content').html('');
  $(".topic_name").click(function(){
    var topic_content = $(this).nextUntil('.topic_name').filter('.topic_content');
    if (topic_content.html() == ''){
      topic_content.css({"max-height":"800px", "overflow-y":"auto", "-webkit-overflow-scrolling":"touch"});
      topic_content.html(
        get_html_feeds_by_topic( $(this).attr("id") )
      );
      // toggle between glyphicon-menu-down and glyphicon-menu-up
      $(this).children(".glyphicon").removeClass("glyphicon-menu-right");
      $(this).children(".glyphicon").addClass("glyphicon-menu-down")
      // move topic_name to the top
      var offset = $(this).offset();
      offset.top -= 10;
      $('html, body').animate({
          scrollTop: offset.top,
      });
    }else{
      topic_content.css({"max-height":"0", "overflow-y":"auto"});
      topic_content.html('');
      // toggle between glyphicon-menu-down and glyphicon-menu-up
      $(this).children(".glyphicon").removeClass("glyphicon-menu-down");
      $(this).children(".glyphicon").addClass("glyphicon-menu-right")
    }
    $(".toggle-switch").click(function(){
      $(this).nextUntil(".toggle-switch").filter(".description").toggle();
      // toggle between glyphicon-menu-down and glyphicon-menu-up
      if ($(this).children(".glyphicon").hasClass("glyphicon-menu-right")){
        $(this).children(".glyphicon").removeClass("glyphicon-menu-right");
        $(this).children(".glyphicon").addClass("glyphicon-menu-down");
      }else{
        $(this).children(".glyphicon").removeClass("glyphicon-menu-down");
        $(this).children(".glyphicon").addClass("glyphicon-menu-right");
      };
    });
  });
});
</script>
  
</body>
</html>